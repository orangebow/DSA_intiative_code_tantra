<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Credit Card Validator</title>
  <meta name="description" content="A simple, modern website to validate credit card numbers using the Luhn algorithm, detect card brand, and check expiry & CVC." />
  <style>
    :root {
      --bg: #0f172a;         
      --panel: #111827;      
      --panel-2: #0b1220;    
      --text: #e5e7eb;       
      --muted: #9ca3af;      
      --primary: #60a5fa;    
      --accent: #34d399;     
      --danger: #f87171;     
      --warning: #fbbf24;    
      --ring: rgba(96,165,250,.35);
      --shadow: 0 10px 25px rgba(0,0,0,.4);
      --radius: 18px;
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background: radial-gradient(1200px 800px at 20% 10%, #0b1220 0%, #0f172a 35%, #020617 100%);
      color: var(--text);
      display: grid;
      place-items: center;
      padding: 32px 16px;
    }

    .app {
      width: 100%;
      max-width: 860px;
      display: grid;
      gap: 18px;
      grid-template-columns: 1.1fr .9fr;
    }

    @media (max-width: 900px) {
      .app { grid-template-columns: 1fr; }
    }

    .card {
      background: linear-gradient(180deg, var(--panel) 0%, var(--panel-2) 100%);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      border: 1px solid rgba(255,255,255,.06);
      padding: 22px;
    }

    h1 { font-size: clamp(22px, 4vw, 34px); margin: 0 0 6px; }
    p.subtitle { margin: 0 0 16px; color: var(--muted); }

    .grid { display: grid; gap: 14px; }
    .row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
    @media (max-width: 520px) { .row { grid-template-columns: 1fr; } }

    label { font-size: 14px; color: var(--muted); display: block; margin-bottom: 6px; }

    input, select, button {
      width: 100%;
      padding: 14px 14px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,.04);
      color: var(--text);
      outline: none;
      transition: box-shadow .15s ease, border-color .15s ease, background .15s ease;
      font-size: 16px;
    }

    input::placeholder { color: #64748b; }

    input:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 4px var(--ring);
      background: rgba(255,255,255,.06);
    }

    button {
      cursor: pointer;
      background: linear-gradient(180deg, #1d4ed8 0%, #1e40af 100%);
      border: 1px solid rgba(255,255,255,.1);
      font-weight: 600;
      letter-spacing: .2px;
    }

    button:hover { filter: brightness(1.06); }
    button:active { transform: translateY(1px); }

    .result {
      display: flex; align-items: center; gap: 10px; flex-wrap: wrap;
      padding: 12px 14px; border-radius: 14px; border: 1px dashed rgba(255,255,255,.15);
      background: rgba(255,255,255,.03);
      min-height: 52px;
    }

    .badge {
      display: inline-flex; align-items: center; gap: 6px;
      padding: 6px 10px; border-radius: 999px; font-size: 13px; font-weight: 600;
      border: 1px solid rgba(255,255,255,.12);
    }
    .ok { background: rgba(52,211,153,.18); color: #bbf7d0; }
    .warn { background: rgba(251,191,36,.18); color: #fde68a; }
    .err { background: rgba(248,113,113,.18); color: #fecaca; }

    .brand-chip {
      display: inline-flex; align-items: center; gap: 8px; padding: 8px 12px;
      border-radius: 12px; background: rgba(255,255,255,.05);
      border: 1px solid rgba(255,255,255,.12);
      font-weight: 600; font-size: 14px;
    }

    .cc-preview {
      display: grid; gap: 10px; align-content: start;
    }

    .preview-card {
      position: relative; overflow: hidden; border-radius: 20px; padding: 20px; height: 210px;
      background: radial-gradient(600px 280px at 10% 10%, rgba(96,165,250,.25), transparent 50%),
                  linear-gradient(135deg, #0b1220 0%, #0f172a 40%, #060b17 100%);
      border: 1px solid rgba(255,255,255,.12);
      box-shadow: var(--shadow);
    }

    .preview-top { display: flex; justify-content: space-between; align-items: center; }
    .chip { width: 42px; height: 32px; border-radius: 6px; background: linear-gradient(180deg, #d1d5db, #9ca3af); opacity: .9; }
    .brand { font-weight: 800; letter-spacing: 1px; opacity: .9; }

    .digits { letter-spacing: 2px; font-size: 20px; margin-top: 24px; font-variant-numeric: tabular-nums; }
    .holder { display: flex; gap: 18px; margin-top: 22px; font-size: 14px; color: var(--muted); }
    .holder span b { color: var(--text); font-weight: 700; }

    .helper {
      font-size: 12px; color: var(--muted); line-height: 1.4;
    }
    .helper code { background: rgba(255,255,255,.06); padding: 2px 6px; border-radius: 6px; }

    .footer {
      text-align: center; color: var(--muted); font-size: 12px; margin-top: 8px;
    }
    .footer a { color: var(--primary); text-decoration: none; }
  </style>
</head>
<body>
  <main class="app" role="main">
    <section class="card">
      <h1>Credit Card Validator</h1>
      <p class="subtitle">Instantly checks number format with the <b>Luhn algorithm</b>, detects card brand, and validates expiry & CVC. No data is sent anywhere—everything runs in your browser.</p>

      <form id="cc-form" class="grid" novalidate>
        <div class="grid">
          <label for="cardNumber">Card number</label>
          <input id="cardNumber" name="cardNumber" inputmode="numeric" autocomplete="cc-number"
                 placeholder="1234 5678 9012 3456" aria-describedby="numberHelp" maxlength="23" />
          <div id="numberHelp" class="helper">Use test numbers like <code>4111 1111 1111 1111</code> (Visa), <code>5555 5555 5555 4444</code> (Mastercard), <code>3782 822463 10005</code> (Amex), <code>6011 1111 1111 1117</code> (Discover).</div>
        </div>

        <div class="row">
          <div>
            <label for="expiry">Expiry (MM/YY)</label>
            <input id="expiry" name="expiry" inputmode="numeric" autocomplete="cc-exp" placeholder="MM/YY" maxlength="5" />
          </div>
          <div>
            <label for="cvc">CVC / CVV</label>
            <input id="cvc" name="cvc" inputmode="numeric" autocomplete="cc-csc" placeholder="123" maxlength="4" />
          </div>
        </div>

        <div class="row">
          <div>
            <label for="name">Cardholder name (optional)</label>
            <input id="name" name="name" autocomplete="cc-name" placeholder="Jane Q. Public" />
          </div>
          <div style="align-self:end;">
            <button type="submit" id="validateBtn">Validate</button>
          </div>
        </div>

        <div class="result" id="result" aria-live="polite"></div>
      </form>

      <p class="footer">For demo & educational purposes only. This page does <u>not</u> collect or transmit card data.</p>
    </section>

    <aside class="cc-preview">
      <div class="preview-card" aria-hidden="true">
        <div class="preview-top">
          <div class="chip" aria-hidden="true"></div>
          <div class="brand" id="brandText">CARD</div>
        </div>
        <div class="digits" id="digits">•••• •••• •••• ••••</div>
        <div class="holder">
          <span>NAME<br><b id="namePreview">—</b></span>
          <span>EXP<br><b id="expPreview">MM/YY</b></span>
          <span>TYPE<br><b id="typePreview">—</b></span>
        </div>
      </div>

      <div class="card">
        <div style="display:flex;align-items:center;gap:10px;margin-bottom:8px">
          <span class="brand-chip" id="brandChip">Brand: —</span>
          <span class="badge warn" id="luhnBadge">Luhn: —</span>
          <span class="badge warn" id="lengthBadge">Length: —</span>
        </div>
        <div class="helper">
          <b>What’s checked?</b>
          <ul>
            <li>Number: Luhn checksum + valid prefix & length for Visa, Mastercard, Amex, Discover</li>
            <li>Expiry: MM/YY, calendar-valid, not in the past</li>
            <li>CVC: 3 or 4 digits (Amex uses 4)</li>
          </ul>
        </div>
      </div>
    </aside>
  </main>

  <script>
    const numberEl = document.getElementById('cardNumber');
    const expiryEl = document.getElementById('expiry');
    const cvcEl = document.getElementById('cvc');
    const nameEl = document.getElementById('name');
    const resultEl = document.getElementById('result');

    const brandText = document.getElementById('brandText');
    const digitsEl = document.getElementById('digits');
    const namePreview = document.getElementById('namePreview');
    const expPreview = document.getElementById('expPreview');
    const typePreview = document.getElementById('typePreview');

    const brandChip = document.getElementById('brandChip');
    const luhnBadge = document.getElementById('luhnBadge');
    const lengthBadge = document.getElementById('lengthBadge');

    const BRAND_INFO = [
      {
        key: 'visa',
        name: 'Visa',
        pattern: /^4\d{0,18}$/,
        validLengths: [13,16,19],
        cvc: [3],
        group: n => n.replace(/(\d{4})(?=\d)/g, '$1 ').trim()
      },
      {
        key: 'mastercard',
        name: 'Mastercard',
        pattern: /^(5[1-5]|2[2-7])\d{0,14}$/,
        validLengths: [16],
        cvc: [3],
        group: n => n.replace(/(\d{4})(?=\d)/g, '$1 ').trim()
      },
      {
        key: 'amex',
        name: 'American Express',
        pattern: /^3[47]\d{0,13}$/,
        validLengths: [15],
        cvc: [4],
        group: n => n
          .replace(/(\d{4})(\d)/, '$1 $2')
          .replace(/(\d{4} \d{6})(\d)/, '$1 $2')
          .trim()
      },
      {
        key: 'discover',
        name: 'Discover',
        pattern: /^(6011|65|64[4-9]|622)\d{0,16}$/,
        validLengths: [16,19],
        cvc: [3],
        group: n => n.replace(/(\d{4})(?=\d)/g, '$1 ').trim()
      }
    ];

    function onlyDigits(s) { return (s || '').replace(/\D+/g, ''); }

    function detectBrand(digits) {
      for (const b of BRAND_INFO) {
        if (b.pattern.test(digits)) return b;
      }
      return null;
    }

    function luhnCheck(digits) {
      if (!digits) return false;
      let sum = 0;
      let dbl = false;
      for (let i = digits.length - 1; i >= 0; i--) {
        let d = digits.charCodeAt(i) - 48; // fast parse int
        if (dbl) {
          d *= 2;
          if (d > 9) d -= 9;
        }
        sum += d;
        dbl = !dbl;
      }
      return sum % 10 === 0;
    }

    function formatNumber(raw, brand) {
      const digits = onlyDigits(raw).slice(0, 19);
      if (brand && brand.group) return brand.group(digits);
      return digits.replace(/(\d{4})(?=\d)/g, '$1 ').trim();
    }

    function validateLength(digits, brand) {
      if (!brand) return { ok: false, hint: 'Unknown brand' };
      const ok = brand.validLengths.includes(digits.length);
      return { ok, hint: ok ? 'OK' : `Expect ${brand.validLengths.join(' or ')} digits` };
    }

    function validateExpiry(raw) {
      if (!raw) return { ok: false, hint: 'Required' };
      const cleaned = raw.replace(/\s/g, '');
      if (!/^\d{2}\/?\d{2}$/.test(cleaned)) return { ok: false, hint: 'Format MM/YY' };
      const [mm, yy] = cleaned.split('/');
      const month = parseInt(mm, 10);
      if (isNaN(month) || month < 1 || month > 12) return { ok: false, hint: 'Invalid month' };
      const now = new Date();
      const currentYY = now.getFullYear() % 100;
      const currentMM = now.getMonth() + 1;
      const year = parseInt(yy, 10);
      const inPast = (year < currentYY) || (year === currentYY && month < currentMM);
      return { ok: !inPast, hint: !inPast ? 'OK' : 'Expired' };
    }

    function validateCVC(raw, brand) {
      const digits = onlyDigits(raw);
      if (!digits) return { ok: false, hint: 'Required' };
      const allowed = brand ? brand.cvc : [3,4];
      const ok = allowed.includes(digits.length);
      return { ok, hint: ok ? 'OK' : `Expect ${allowed.join(' or ')} digits` };
    }

    function updateBadges({ luhnOk, lenOk, lenHint, brand }) {
      luhnBadge.textContent = `Luhn: ${luhnOk ? 'Pass' : 'Fail'}`;
      luhnBadge.className = `badge ${luhnOk ? 'ok' : 'err'}`;

      lengthBadge.textContent = `Length: ${lenOk ? 'OK' : lenHint}`;
      lengthBadge.className = `badge ${lenOk ? 'ok' : 'warn'}`;

      brandChip.textContent = `Brand: ${brand ? brand.name : '—'}`;
    }

    function updatePreview() {
      const digits = onlyDigits(numberEl.value);
      const brand = detectBrand(digits);
      numberEl.value = formatNumber(numberEl.value, brand);

      brandText.textContent = brand ? brand.name.toUpperCase() : 'CARD';
      digitsEl.textContent = numberEl.value || '•••• •••• •••• ••••';
      expPreview.textContent = expiryEl.value || 'MM/YY';
      namePreview.textContent = nameEl.value || '—';
      typePreview.textContent = brand ? brand.key.toUpperCase() : '—';

      const luhnOk = luhnCheck(digits);
      const { ok: lenOk, hint: lenHint } = validateLength(digits, brand || { validLengths: [] });
      updateBadges({ luhnOk, lenOk, lenHint, brand });
    }

    numberEl.addEventListener('input', updatePreview);
    expiryEl.addEventListener('input', (e) => {
      let v = e.target.value.replace(/[^\d]/g, '').slice(0,4);
      if (v.length >= 3) v = v.slice(0,2) + '/' + v.slice(2);
      e.target.value = v;
      updatePreview();
    });
    cvcEl.addEventListener('input', (e) => {
      const digits = onlyDigits(numberEl.value);
      const brand = detectBrand(digits);
      e.target.value = onlyDigits(e.target.value).slice(0, brand && brand.key === 'amex' ? 4 : 3);
      updatePreview();
    });
    nameEl.addEventListener('input', updatePreview);

    document.getElementById('cc-form').addEventListener('submit', (e) => {
      e.preventDefault();
      const digits = onlyDigits(numberEl.value);
      const brand = detectBrand(digits);
      const luhnOk = luhnCheck(digits);
      const { ok: lenOk, hint: lenHint } = validateLength(digits, brand || { validLengths: [] });
      const { ok: expOk, hint: expHint } = validateExpiry(expiryEl.value);
      const { ok: cvcOk, hint: cvcHint } = validateCVC(cvcEl.value, brand);

      const fragments = [];
      if (brand) fragments.push(`<span class="badge ok">${brand.name}</span>`);
      fragments.push(`<span class="badge ${luhnOk ? 'ok' : 'err'}">Luhn ${luhnOk ? 'pass' : 'fail'}</span>`);
      fragments.push(`<span class="badge ${lenOk ? 'ok' : 'warn'}">Length ${lenOk ? 'OK' : lenHint}</span>`);
      fragments.push(`<span class="badge ${expOk ? 'ok' : 'err'}">Expiry ${expOk ? 'OK' : expHint}</span>`);
      fragments.push(`<span class="badge ${cvcOk ? 'ok' : 'err'}">CVC ${cvcOk ? 'OK' : cvcHint}</span>`);

      const allOk = luhnOk && lenOk && expOk && cvcOk && !!brand;
      const summary = allOk
        ? `<span class="badge ok">✔ Valid card details</span>`
        : `<span class="badge err">✖ Not valid yet</span>`;

      resultEl.innerHTML = `${summary} ${fragments.join(' ')}`;
    });

    // Initialize preview state
    updatePreview();
  </script>
</body>
</html>
